# =============================================================================
# Flox Environment Manifest - Git Merge Editor
# =============================================================================
# Environnement de développement reproductible
# Activation: flox activate
# Documentation: https://flox.dev/docs/
# =============================================================================

version = 1

# =============================================================================
# PACKAGES
# =============================================================================
[install]
# --- Core Tools (toujours installés) ---
go-task.pkg-path = "go-task"
gum.pkg-path = "gum"
jq.pkg-path = "jq"
git.pkg-path = "git"
curl.pkg-path = "curl"

# --- Outils complémentaires ---
yq.pkg-path = "yq"
bat.pkg-path = "bat"


# --- AI Tools (toujours inclus) ---
# Note: Ollama doit être installé séparément (brew install ollama)
gh.pkg-path = "gh"




# =============================================================================
# VARIABLES D'ENVIRONNEMENT
# =============================================================================
[vars]
PROJECT_NAME = "Git Merge Editor"
PROJECT_VERSION = "0.1.0"
AI_MODEL = "qwen2.5-coder:14b"
AI_LANG = "fr"
OLLAMA_HOST = "http://localhost:11434"


# =============================================================================
# HOOK D'ACTIVATION
# =============================================================================
[hook]
on-activate = '''
# Banner de bienvenue

COLOR="212"


gum style \
    --border rounded \
    --border-foreground $COLOR \
    --padding "1 2" \
    --width 60 \
    "$(gum style --foreground $COLOR --bold 'Git Merge Editor')" \
    "$(gum style --foreground 240 'v0.1.0 | task --list')"

# Vérifier Ollama
if ! command -v ollama &> /dev/null; then
    gum style --foreground 226 " Ollama non trouvé. Installer: brew install ollama"
fi

'''

# =============================================================================
# PROFILS SHELL
# =============================================================================
[profile]
common = '''
# Aliases communs pour Git Merge Editor
alias t="task"
alias tl="task --list"
alias yolo="task ai:commit:yolo"
alias aipr="task ai:pr"



'''

# =============================================================================
# OPTIONS
# =============================================================================
[options]
systems = [
    "aarch64-darwin",
    "aarch64-linux",
    "x86_64-darwin",
    "x86_64-linux",
]
